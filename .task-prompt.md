# Task: Systematically Review and Update Project Documentation

## 1. Objective

Perform a comprehensive review and update of the project's ReadTheDocs documentation to align it with the recent, significant shift to a service-oriented architecture. The goal is to ensure all documentation is accurate, reflects the current codebase, and provides clear guidance on the new architectural patterns, usage, and configuration.

## 2. Context and Background

The Biomapper project has undergone a major refactoring. The previously monolithic `MappingExecutor` has been decomposed into a lean facade that delegates all complex operations to a suite of new, specialized services. Key architectural changes include:

-   **New Services:** `IterativeExecutionService`, `DbStrategyExecutionService`, `YamlStrategyExecutionService`, `MappingHandlerService`, `DirectMappingService`, `PathFinder`, `ClientManager`, and more.
-   **New Patterns:** Heavy reliance on dependency injection and a service-oriented approach.
-   **YAML Strategies:** YAML-defined strategies using `StrategyAction` classes are now the primary method for orchestrating complex mapping pipelines.

The existing documentation, located in `/home/ubuntu/Software-Engineer-AI-Agent-Atlas/biomapper/docs/source`, is now severely outdated and does not reflect this new architecture. This task is to bring it up to date.

## 3. Task Breakdown

This is a systematic review. Please examine and update the following files and sections within the `docs/source/` directory:

1.  **`index.rst` - The Homepage**:
    -   Review the project's mission statement and high-level overview. Ensure it accurately describes the project's current capabilities and design philosophy (e.g., modular, extensible, configuration-driven).

2.  **`architecture.rst` - Architectural Overview (High Priority)**:
    -   This section requires a complete rewrite.
    -   **Remove** all descriptions of the old, monolithic `MappingExecutor`.
    -   **Add** a new section describing the **Service-Oriented Architecture**.
    -   Create a diagram (using `sphinx.ext.graphviz` or `mermaid` if available, otherwise a clear text description) illustrating how `MappingExecutor` acts as a facade and delegates to the various execution and handler services.
    -   Describe the roles of the key new services (`IterativeExecutionService`, `YamlStrategyExecutionService`, `MappingHandlerService`, etc.).

3.  **`usage.rst` - Usage Guide and Examples (High Priority)**:
    -   Review all code examples.
    -   **Replace** old examples that instantiate and call a monolithic `MappingExecutor`.
    -   **Add** new examples that demonstrate the current, correct usage:
        -   A simple example showing how to instantiate the `MappingExecutor` and call one of its high-level methods (e.g., `execute_mapping`).
        -   A more advanced example showing how to execute a YAML-defined strategy using `execute_yaml_strategy`, including how to pass `initial_context`.

4.  **`configuration.rst` - Configuration Guide**:
    -   Update the documentation for `protein_config.yaml` to reflect any changes in its structure.
    -   **Add a new, detailed section** on `mapping_strategies_config.yaml`.
    -   Explain the structure of a YAML strategy, including the `steps` list and the purpose of `action`, `name`, and `parameters`.
    -   Provide an example of a simple strategy definition.

5.  **API Reference (`api/` directory)**:
    -   The API reference is likely generated by `autodoc` from docstrings. The primary task here is to ensure the source docstrings are accurate.
    -   **Review and update the docstrings** for `MappingExecutor`. They should clearly state that it is a facade and its methods delegate to other services.
    -   **Review the docstrings for all new services** in `biomapper/core/services/`. Ensure they are clear, accurate, and describe the service's responsibility, parameters, and return values.
    -   Ensure the `.rst` files in the `api/` directory are configured to find and document all the new service modules.

## 4. Implementation Requirements

-   **Format:** All documentation is written in reStructuredText (`.rst`). Adhere to its syntax and conventions.
-   **Clarity:** Write for a developer audience. Be clear, concise, and provide practical examples.
-   **Code Blocks:** Use `.. code-block:: python` for all Python examples.

## 5. Validation and Success Criteria

-   **Primary Validation:** The updated documentation must build successfully without errors or warnings.
-   **Execution Command:** From the `/home/ubuntu/Software-Engineer-AI-Agent-Atlas/biomapper/docs/` directory, run:
    ```bash
    make html
    ```
-   **Review:** After a successful build, manually open the generated HTML files in `build/html/index.html` and review the changes in a browser to ensure they are rendered correctly and the content is accurate and easy to understand.

## 6. Feedback and Reporting

-   Provide a summary of the key changes made to each documentation file (`index.rst`, `architecture.rst`, etc.).
-   Confirm that the documentation build was successful (`make html` ran without errors).
-   Confirm that you have manually reviewed the generated HTML and that it looks correct.
